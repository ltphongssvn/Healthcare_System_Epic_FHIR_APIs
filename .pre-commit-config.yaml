# File: /.pre-commit-config.yaml
# Pre-commit hooks for Node.js/React Healthcare System
repos:
  - repo: https://github.com/Yelp/detect-secrets
    rev: v1.5.0
    hooks:
      - id: detect-secrets
        args: ['--baseline', '.secrets.baseline']
        exclude: .*\.lock|.*\.log|.*\.pyc|node_modules/

  - repo: local
    hooks:
      - id: block-large-files
        name: Block Large Files
        entry: sh -c 'git diff --cached --name-only | xargs -I {} du -k {} 2>/dev/null | awk "\$1 > 1024 {print \$2; exit 1}" && echo "ERROR - Files >1MB detected" || exit 0'
        language: system
        pass_filenames: false

      - id: check-node-modules
        name: Check node_modules
        entry: sh -c 'git diff --cached --name-only | grep -q "^node_modules/" && echo "ERROR - node_modules detected. Check .gitignore" && exit 1 || exit 0'
        language: system
        pass_filenames: false

      - id: auto-clean-untracked
        name: Auto Move Untracked Files
        entry: sh -c 'if [ -n "$(git status --porcelain | grep "^??")" ]; then ./git-clean-commit.sh; fi; exit 0'
        language: system
        pass_filenames: false
        stages: [pre-commit]
